package n1ex3;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.sql.Date;

public class App {

	public static void main(String[] args) {

		// Ruta del directori
		File directori = new File("C:\\Users\\psyen\\Desktop\\ITAcademy\\fitxer.txt");

		escrituraFitxer(directori);
	}
	public static void escrituraFitxer(File directori) {
		
		
		File[] llista = directori.listFiles(); // El metode list retorna una Array de String amb el nom de tots els
		// arxius i directoris que té l'objecte que hem creat

		if (llista != null) { // Comprova si la llista no és nul.la

			for (int i = 0; i < llista.length; i++) { 
				if (llista[i].isDirectory()) {
					System.out.println("D: " + llista[i] + " " + new Date(llista[i].lastModified()));// Si és de tipus
			// directori sortirà una D i printa la data de modificació
								
				} else {
					System.out.println("F: " + llista[i] + " " + new Date(llista[i].lastModified())); // Si és de tipus fitxer sortirà una F  i printa la data

				}
			}
		}

		FileWriter fichero = null;
		try {

			fichero = new FileWriter("fichero_escritura.txt");

			// Escribimos linea a linea en el fichero
			for (File linea : llista) {
				fichero.write(linea + "\n");
			}

			fichero.close();

		} catch (Exception ex) {
			System.out.println("Mensaje de la excepción: " + ex.getMessage());
		}
	}
}

//////////////////////////////////////
package n1ex3;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileFilter;
import java.io.FileWriter;
import java.io.IOException;
import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.Arrays;

public class App {

	public static void main(String[] args) {
		llegirDirectori();

		}
		
		public static File llegirDirectori() {
			
			File archivo = null;
			// Carpeta del usuario
			String sCarpAct = System.getProperty("user.dir");
			System.out.println("Carpeta de l'usuari: " + sCarpAct);

			File carpeta = new File(sCarpAct);

			File[] archivos = carpeta.listFiles();
			if (archivos == null || archivos.length == 0) {
				System.out.println("No hi ha elements dins de la carpeta");

			} else {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				FileWriter flwriter;
				try {
					flwriter = new FileWriter("user.dir");
					//crea un buffer o flujo intermedio antes de escribir directamente en el archivo
					BufferedWriter bfwriter = new BufferedWriter(flwriter);
					for(File llista : archivos) {
						bfwriter.write(archivo);
						System.out.println(String.format("%s (%s)  - %s", archivo.getName(),
						archivo.isDirectory() ? "Directori" : "Fitxer",
						sdf.format(archivo.lastModified()) ));
						 

					}
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
			
			}
			return archivo;
		}
	}
